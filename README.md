# SafeTaichung 台中安全路線導航

台中市都市犯罪分析專案，結合開放資料進行犯罪統計分析、視覺化與安全路線規劃。

**GitHub**: https://github.com/pqzada/computational-thinking

**Live Demo**: https://safetaichung.streamlit.app

---

## 專案簡介

本專案分析台中市 105-108 年（2016-2019）竊盜案件資料，計算各行政區風險指標，並開發互動式安全路線導航系統。

### SDG 永續發展目標

- **SDG 11 永續城市與社區**: 透過治安風險地圖與安全路線建議，協助民眾做出更安全的生活選擇
- **SDG 16 和平、正義及健全制度**: 將公開治安數據轉換為易於理解的安全指標

---

## 分析流程

### 1. 資料收集

從台中市政府開放資料平台下載 105-108 年四類竊盜案件：

| 類型 | 案件數 |
|------|--------|
| 機車竊盜 | 1,375 |
| 住宅竊盜 | 718 |
| 汽車竊盜 | 636 |
| 自行車竊盜 | 557 |
| **總計** | **3,286** |

### 2. 資料清理

- 民國年日期轉換為西元年 (1050102 → 2016-01-02)
- 時間欄位轉換為小時 (1530 → 15)
- 從地址文字解析行政區
- 標記無效資料

### 3. 地理編碼

將地址轉換為經緯度座標：

- Nominatim API 精確定位 (72.7%)
- 行政區隨機座標作為 fallback (27.3%)
- 邊界驗證過濾超出台中市範圍的錯誤座標

### 4. 風險指標計算

```
每萬人竊盜率 = 總件數 / 人口 × 10,000
時段風險分數 = 該時段案件數 / (全日案件數 / 24)
路線風險分數 = Σ(區域風險 × 時段風險) / 經過區數
```

---

## 主要發現

### 年度趨勢

竊盜案件呈現明顯下降趨勢：

| 年份 | 案件數 |
|------|--------|
| 2016 | 1,143 |
| 2017 | 1,102 |
| 2018 | 792 |
| 2019 | 249 |

### 時段分布

高風險時段：凌晨 2-6 點、中午 12 點、傍晚 18 點

### 行政區風險

以總件數排序：西屯區 (344) > 北區 (331) > 北屯區 (267)

以每萬人竊盜率排序（人口校正後）：

| 行政區 | 每萬人竊盜率 |
|--------|--------------|
| 中區 | 56.7 |
| 東區 | 25.2 |
| 北區 | 22.4 |

中區雖然總件數不高，但因人口少，每萬人竊盜率遠高於其他區域。

---

## 資料來源

| 資料集 | 來源 | 時間範圍 |
|--------|------|----------|
| 竊盜逐案資料 | [台中市政府開放資料平台](https://opendata.taichung.gov.tw/) | 105-108年 |
| 人口統計 | 台中市政府民政局 | 107年12月 |
| 官方治安統計 | 台中市政府警察局 | 2016-2022年 |

---

## 專案結構

```
.
├── app.py                    # Streamlit 主應用程式
├── src/
│   ├── risk_model.py         # 風險模型計算
│   ├── geocoder.py           # 地理編碼模組
│   └── google_maps.py        # Google Maps API 整合
├── data/
│   ├── raw/                  # 原始 CSV 資料
│   └── processed/            # 清理後的資料
├── notebooks/
│   └── 01_taichung_crime_eda.ipynb  # 探索性資料分析
├── outputs/figures/          # 分析圖表
├── assets/images/            # 網站圖片資源
└── docs/
    ├── analysis_code.py      # 整理後的分析程式碼
    └── conversation_log.md   # AI 對話紀錄
```

---

## 使用方式

### 安裝依賴

```bash
uv sync
```

### 執行應用

```bash
uv run streamlit run app.py
```

### 執行資料分析

```bash
uv run jupyter notebook notebooks/01_taichung_crime_eda.ipynb
```

### 執行地理編碼

```bash
uv run python src/geocoder.py --nominatim --sample 100
```

---

## 技術架構

- **後端**: Python, Pandas, NumPy
- **前端**: Streamlit, Folium
- **地圖 API**: Google Maps Directions API
- **地理編碼**: Nominatim (OpenStreetMap)
- **資料分析**: Jupyter Notebook, Matplotlib, Seaborn

---

## 使用限制

1. 本系統為學術/教學用途，風險分數為相對指標
2. 開放資料僅涵蓋四類竊盜，約佔官方全部竊盜的 20%
3. 資料時間範圍為 105-108 年，較近期資料尚未開放
4. 實際治安仍以官方資訊為準

---

## License

MIT License

---

計算思維與人工智慧課程專題
